<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Changelog — Bavarian Rank Engine</title>
    <meta name="description" content="Full version history and release notes for Bavarian Rank Engine.">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://bavarianrankengine.com/changelog.html">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .cl-group {
            margin: 24px 0 8px;
        }
        .cl-group__label {
            display: inline-block;
            font-size: 11px;
            font-weight: 600;
            letter-spacing: .08em;
            text-transform: uppercase;
            padding: 3px 10px;
            border-radius: 3px;
            margin-bottom: 8px;
            background: var(--surface);
            color: var(--text-muted);
            border: 1px solid var(--border);
        }
        .cl-group__label--new     { background: #0d3d1f; color: #4caf82; border-color: #1a5c30; }
        .cl-group__label--security{ background: #3d1a0d; color: #e08c4d; border-color: #5c2d1a; }
        .cl-group__label--dev     { background: #0d1f3d; color: #4d9de0; border-color: #1a3060; }
    </style>
    <script>
        var _paq = window._paq = window._paq || [];
        _paq.push(["trackPageView"]);
        _paq.push(["enableLinkTracking"]);
        (function() {
            var u="//data.donau2space.de/";
            _paq.push(["setTrackerUrl", u+"matomo.php"]);
            _paq.push(["setSiteId", "2"]);
            var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
            g.async=true; g.src=u+"matomo.js"; s.parentNode.insertBefore(g,s);
        })();
    </script>
</head>
<body>

<nav class="nav scrolled" id="nav">
    <div class="container nav__inner">
        <a href="index.html" class="nav__logo"><span>&lt;/&gt;</span> Bavarian Rank Engine</a>
        <ul class="nav__links" id="navLinks">
            <li><a href="index.html#features">Features</a></li>
            <li><a href="index.html#security">Security</a></li>
            <li><a href="howto.html">How To</a></li>
            <li><a href="index.html#getit">Get It</a></li>
        </ul>
        <button class="nav__toggle" id="navToggle" aria-label="Toggle menu">&#9776;</button>
    </div>
</nav>

<main class="subpage">
    <div class="container">
        <div class="subpage__header">
            <h1 class="subpage__title">Changelog</h1>
            <p class="subpage__meta">Version history for Bavarian Rank Engine</p>
        </div>

        <!-- ═══════════════ v1.1.1 ═══════════════ -->
        <div class="changelog-version">
            <h2 class="changelog-version__heading">1.1.1 &mdash; Encoding &amp; Styling Fixes</h2>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Bug Fixes</div>
                <ul>
                    <li>Fixed: umlauts and special characters (ä, ö, ü, narrow spaces) displayed as raw escape sequences (e.g. <code>u00e4</code>) in the GEO Quick Overview block on the frontend</li>
                    <li>Fixed: dark / light color scheme setting had no visible effect on the frontend block due to browser CSS cache from v1.1.0</li>
                    <li>GEO block JSON storage now uses <code>JSON_UNESCAPED_UNICODE</code> — actual UTF-8 bytes are stored instead of <code>\uXXXX</code> escape sequences, eliminating any encoding ambiguity in the round-trip through the database</li>
                </ul>
            </div>

        </div><!-- /v1.1.1 -->

        <!-- ═══════════════ v1.1.0 ═══════════════ -->
        <div class="changelog-version">
            <h2 class="changelog-version__heading">1.1.0 &mdash; GEO Quick Overview</h2>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">GEO Block</div>
                <ul>
                    <li>GEO Quick Overview &mdash; AI-generated per-post summary block with short summary, key bullet points, and optional FAQ</li>
                    <li>Rendered as a native <code>&lt;details&gt;</code> element: collapsible (default), always open, or store-only (no frontend output)</li>
                    <li>Configurable insertion position: after first paragraph (default), top, or bottom of content</li>
                    <li>Auto-generation on publish via <code>transition_post_status</code> hook; optional re-generation on every update</li>
                    <li>Three modes: auto on publish, hybrid (auto only when fields are empty), or manual only</li>
                    <li>Quality gate: word-count threshold suppresses FAQ on short posts (default: 350 words)</li>
                    <li>JSON response parsing with markdown-fence stripping and hard bounds on summary length and bullet/FAQ count</li>
                    <li>Fluff-phrase detection prevents filler language in AI output</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Editor Integration</div>
                <ul>
                    <li>Post editor meta box with live generate and clear buttons, per-post enable/disable toggle, and lock checkbox</li>
                    <li>Auto-lock: manual edits to summary, bullets, or FAQ automatically engage the lock to prevent AI overwrite</li>
                    <li>Optional per-post prompt add-on field for author-level customization</li>
                    <li>AJAX generation fills fields instantly without a page reload; last-generated timestamp shown in the meta box</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Settings &amp; Styling</div>
                <ul>
                    <li>Dedicated admin page under <em>Bavarian Rank &rarr; GEO Block</em> with full settings form</li>
                    <li>Configurable labels (block title, summary, bullets, FAQ) and output style per site</li>
                    <li>Bundled minimal CSS scoped to <code>.bre-geo</code> &mdash; optional, can be disabled</li>
                    <li>Custom CSS field for theme-level overrides; output automatically scoped to <code>.bre-geo{&hellip;}</code></li>
                    <li>Fully customizable AI prompt with <code>{title}</code>, <code>{content}</code>, and <code>{language}</code> placeholders</li>
                </ul>
            </div>

        </div><!-- /v1.1.0 -->

        <!-- ═══════════════ v1.0.0 ═══════════════ -->
        <div class="changelog-version">
            <h2 class="changelog-version__heading">1.0.0 &mdash; Initial Release</h2>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">AI &amp; Meta Generation</div>
                <ul>
                    <li>AI Meta Generator — auto-generates a 150&ndash;160 character, SEO-optimized meta description the moment a post is published</li>
                    <li>Customizable prompt with <code>{title}</code>, <code>{content}</code>, <code>{excerpt}</code>, and <code>{language}</code> placeholders</li>
                    <li>Automatic language detection via Polylang, WPML, or WordPress site locale</li>
                    <li>Fallback meta extraction (sentence-boundary-aware, 150&ndash;160 characters) — works without an API key or on API failure</li>
                    <li>Multi-provider support: OpenAI (GPT-4.1, GPT-4o, GPT-4o mini), Anthropic Claude (3.5 Sonnet, 3 Haiku), Google Gemini (2.0 Flash, 1.5 Pro), xAI Grok (3, 3 mini)</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Bulk Operations</div>
                <ul>
                    <li>Bulk Generator — batch-process posts that have no meta description yet</li>
                    <li>Batched AJAX processing with 6-second rate-limiting delay between batches</li>
                    <li>Transient-based lock prevents simultaneous runs; auto-expires after 15 minutes</li>
                    <li>Up to 3 retries per post with 1-second delay between attempts</li>
                    <li>Live progress log, per-batch cost estimate, and failed-post summary</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Schema.org &amp; GEO</div>
                <ul>
                    <li>Schema.org Enhancer — injects JSON-LD structured data for Organization, Article, Author, Speakable, and BreadcrumbList types</li>
                    <li>AI indexing meta tags: <code>max-snippet:-1</code>, <code>max-image-preview:large</code>, <code>max-video-preview:-1</code></li>
                    <li>BreadcrumbList output suppressed automatically when Rank Math or Yoast SEO is active</li>
                    <li>Organization <code>sameAs</code> social links configurable from the admin</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Content Discovery</div>
                <ul>
                    <li>llms.txt — serves a machine-readable content index at <code>/llms.txt</code> for AI retrieval systems</li>
                    <li>Supports custom title, description sections, featured resource links, and post-type selection</li>
                    <li>Pagination for large sites; HTTP ETag / Last-Modified caching; manual cache clear button</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Bot &amp; Crawler Management</div>
                <ul>
                    <li>robots.txt manager — block 13 known AI crawlers and data-harvesting bots from the WordPress admin: GPTBot, ClaudeBot, Google-Extended, PerplexityBot, CCBot, Applebot-Extended, Bytespider, DataForSeoBot, ImagesiftBot, Omgili, Diffbot, FacebookBot, Amazonbot</li>
                    <li>Crawler Log — records AI-bot visits (bot name, hashed IP, URL) in a private database table</li>
                    <li>30-day summary shown on the plugin dashboard; entries purged automatically after 90 days</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Editor &amp; Dashboard</div>
                <ul>
                    <li>Meta Description meta box — shows current description, its source (AI / Fallback / Manual), a live character counter, and one-click AI regeneration</li>
                    <li>SEO Analysis sidebar widget — word count, reading time, heading structure, link counts, live warnings</li>
                    <li>Link Analysis dashboard panel — posts without internal links, external-link outliers, top pillar pages by inbound link count</li>
                    <li>Plugin dashboard with provider status, meta coverage per post type, and crawler activity summary</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--new">Plugin Integrations</div>
                <ul>
                    <li>Native meta field write-through for Rank Math, Yoast SEO, AIOSEO, and SEOPress</li>
                    <li>Existing descriptions set by those plugins are always respected and never overwritten</li>
                    <li>Standalone meta output suppressed automatically when a supported SEO plugin is active</li>
                    <li>Language detection from Polylang and WPML for correct per-language meta generation</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--security">Security</div>
                <ul>
                    <li>KeyVault API key obfuscation — keys are XOR-encrypted with a key derived from WordPress auth salts before database storage; never stored in plain text</li>
                    <li>No OpenSSL extension required</li>
                    <li>SHA-256 IP hashing in Crawler Log — original IP addresses are never stored</li>
                </ul>
            </div>

            <div class="cl-group">
                <div class="cl-group__label cl-group__label--dev">Developer</div>
                <ul>
                    <li><code>bre_prompt</code> filter — customize the AI prompt at runtime</li>
                    <li><code>bre_meta_saved</code> action — hook into meta description saves for custom workflows</li>
                    <li>Extensible provider architecture — implement <code>ProviderInterface</code> to add custom AI providers</li>
                </ul>
            </div>

        </div><!-- /v1.0.0 -->

    </div>
</main>

<footer class="footer">
    <div class="container footer__inner">
        <span class="footer__brand">
            Bavarian Rank Engine &mdash; by <a href="https://donau2space.de" target="_blank" rel="noopener">Donau2Space.de</a>
        </span>
        <ul class="footer__links">
            <li><a href="howto.html">How To</a></li>
            <li><a href="changelog.html">Changelog</a></li>
            <li><a href="impressum.html">Impressum &amp; Datenschutz</a></li>
        </ul>
    </div>
</footer>

<script src="js/main.js"></script>
</body>
</html>
